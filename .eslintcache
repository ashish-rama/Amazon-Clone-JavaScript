[{"/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Header/Header.js":"1","/Users/ashish/Documents/Local Projects/amazon-clone/src/App.js":"2","/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Payment/Payment.js":"3","/Users/ashish/Documents/Local Projects/amazon-clone/src/axios.js":"4","/Users/ashish/Documents/Local Projects/amazon-clone/src/reducer.js":"5","/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Orders/Orders.js":"6","/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Order/Order.js":"7","/Users/ashish/Documents/Local Projects/amazon-clone/src/components/CheckoutProduct/CheckoutProduct.js":"8","/Users/ashish/Documents/Local Projects/amazon-clone/src/index.js":"9","/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Login/Login.js":"10","/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Checkout/Checkout.js":"11","/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Home/Home.js":"12","/Users/ashish/Documents/Local Projects/amazon-clone/src/firebase.js":"13"},{"size":2237,"mtime":1609631052693,"results":"14","hashOfConfig":"15"},{"size":1992,"mtime":1610486140362,"results":"16","hashOfConfig":"15"},{"size":5494,"mtime":1609634022143,"results":"17","hashOfConfig":"15"},{"size":267,"mtime":1609631988533,"results":"18","hashOfConfig":"15"},{"size":1222,"mtime":1609627794535,"results":"19","hashOfConfig":"15"},{"size":1090,"mtime":1609635142086,"results":"20","hashOfConfig":"15"},{"size":1235,"mtime":1609635254355,"results":"21","hashOfConfig":"15"},{"size":1230,"mtime":1609630916449,"results":"22","hashOfConfig":"15"},{"size":689,"mtime":1609389103497,"results":"23","hashOfConfig":"15"},{"size":2232,"mtime":1609449310772,"results":"24","hashOfConfig":"15"},{"size":1291,"mtime":1609450664967,"results":"25","hashOfConfig":"15"},{"size":3135,"mtime":1609374848654,"results":"26","hashOfConfig":"15"},{"size":522,"mtime":1609448634412,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"19mrifh",{"filePath":"30","messages":"31","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"32","messages":"33","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Header/Header.js",["57"],"/Users/ashish/Documents/Local Projects/amazon-clone/src/App.js",["58","59"],"/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Payment/Payment.js",["60"],"import { CardElement, useElements, useStripe } from '@stripe/react-stripe-js';\nimport axios from '../../axios';\nimport React, { useEffect, useState } from 'react';\nimport CurrencyFormat from 'react-currency-format';\nimport { Link, useHistory } from 'react-router-dom';\nimport { getBasketTotal } from '../../reducer';\nimport { useStateValue } from '../../StateProvider';\nimport CheckoutProduct from '../CheckoutProduct/CheckoutProduct';\nimport './Payment.css';\nimport { db } from '../../firebase';\n\nfunction Payment() {\n    const [{ basket, user }, dispatch] = useStateValue();\n\n    const history = useHistory();\n\n    const stripe = useStripe();\n    const elements = useElements();\n\n    const [succeeded, setSucceeded] = useState(false);\n    const [processing, setProcessing] = useState(\"\");\n    const [error, setError] = useState(null);\n    const [disabled, setDisabled] = useState(true);\n    const [clientSecret, setClientSecret] = useState(true);\n\n    useEffect(() => {\n        const getClientSecret = async () => {\n            const response = await axios({\n                method: 'post',\n                //Stripe expects the total in a currencies subunits\n                url: `/payments/create?total=${getBasketTotal(basket) * 100}`\n            });\n            setClientSecret(response.data.clientSecret)\n        }\n\n        getClientSecret();\n    }, [basket]);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setProcessing(true);\n\n        const payload = await stripe.confirmCardPayment(clientSecret, {\n            payment_method: {\n                card: elements.getElement(CardElement)\n            }\n        }).then(({ paymentIntent }) => {\n            // paymentIntent = payment confirmation\n\n            db\n                .collection('users')\n                .doc(user?.uid)\n                .collection('orders')\n                .doc(paymentIntent.id)\n                .set({\n                    basket: basket,\n                    amount: paymentIntent.amount,\n                    created: paymentIntent.created\n                })\n\n            setSucceeded(true);\n            setError(null);\n            setProcessing(false);\n\n            dispatch({\n                type: \"EMPTY_BASKET\"\n            })\n\n            // replace because we don't want the user to go back to the payments page\n            history.replace('/orders');\n        });\n    }\n\n    const handleChange = e => {\n        setDisabled(e.empty);\n        setError(e.error ? e.error.message : \"\");\n    }\n\n    return (\n        <div className=\"payment\">\n            <div className=\"payment__container\">\n                <h1>\n                    Checkout (<Link to=\"/checkout\">{basket?.length} items</Link>)\n                </h1>\n\n                <div className=\"payment__section\">\n                    <div className=\"payment__title\">\n                        <h3>Delivery Address</h3>\n                    </div>\n                    <div className=\"payment__address\">\n                        <p>{user?.email}</p>\n                        <p>123 React Lane</p>\n                        <p>San Francisco, CA</p>\n                    </div>\n                </div>\n\n                <div className=\"payment__section\">\n                    <div className=\"payment__title\">\n                        <h3>Review Items and Delivery</h3>\n                    </div>\n                    <div className=\"payment__items\">\n                        {basket.map(item => (\n                            <CheckoutProduct \n                                id={item.id}\n                                title={item.title}\n                                image={item.image}\n                                price={item.price}\n                                rating={item.rating}\n                            />\n                        ))}\n                    </div>\n                </div>\n\n                <div className=\"payment__section\">\n                    <div className=\"payment__title\">\n                        <h3>Payment Method</h3>\n                    </div>\n                    <div className=\"payment__details\">\n                        <form onSubmit={handleSubmit}>\n                            <CardElement onChange={handleChange} />\n                            <div className=\"payment__priceContainer\">\n                                <CurrencyFormat\n                                    renderText={(value) => (\n                                        <>\n                                            <h3>Order Total: {value}</h3>\n                                        </>\n                                    )}\n                                    decimalScale={2}\n                                    value={getBasketTotal(basket)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    prefix={\"$\"}\n                                />\n                                <button disabled={processing || disabled || succeeded}>\n                                    <span>{processing ? <p>Processing</p> : \"Buy Now\"}</span>\n                                </button>\n                            </div>\n                            {error && <div>{error}</div>}\n                        </form>\n                        <p><small>(Demo Card No: 4242 4242 4242 4242 | Date: 424 | CVC: 242 | Zip: 42424)</small></p>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n    )\n}\n\nexport default Payment\n","/Users/ashish/Documents/Local Projects/amazon-clone/src/axios.js",[],"/Users/ashish/Documents/Local Projects/amazon-clone/src/reducer.js",[],"/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Orders/Orders.js",["61","62"],"/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Order/Order.js",[],"/Users/ashish/Documents/Local Projects/amazon-clone/src/components/CheckoutProduct/CheckoutProduct.js",["63"],"/Users/ashish/Documents/Local Projects/amazon-clone/src/index.js",[],["64","65"],"/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Login/Login.js",[],"/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Checkout/Checkout.js",["66"],"import React from 'react';\nimport { useStateValue } from '../../StateProvider';\nimport CheckoutProduct from '../CheckoutProduct/CheckoutProduct';\nimport Subtotal from '../Subtotal/Subtotal';\nimport './Checkout.css';\n\nfunction Checkout() {\n    const [{ basket, user }, dispath] = useStateValue();\n\n    return (\n        <div className=\"checkout\">\n            <div className=\"__checkout__left\">\n                <img className=\"checkout__ad\"\n                src=\"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg\"\n                alt=\"\"\n                />\n                \n                <div>\n                    <h3>Hello, {user?.email}</h3>\n                    <h2 className=\"checkout__title\">Your Shopping Basket</h2>\n                </div>\n\n                {basket.map(item => (\n                    <CheckoutProduct \n                        id={item.id}\n                        title={item.title}\n                        image={item.image}\n                        price={item.price}\n                        rating={item.rating}\n                    />\n                ))}\n\n            </div>\n            \n            <div className=\"checkout__right\">\n                <Subtotal />\n            </div>\n        </div>\n    )\n}\n\nexport default Checkout\n","/Users/ashish/Documents/Local Projects/amazon-clone/src/components/Home/Home.js",[],"/Users/ashish/Documents/Local Projects/amazon-clone/src/firebase.js",[],{"ruleId":"67","severity":1,"message":"68","line":10,"column":30,"nodeType":"69","messageId":"70","endLine":10,"endColumn":38},{"ruleId":"71","severity":1,"message":"72","line":21,"column":10,"nodeType":"73","messageId":"74","endLine":21,"endColumn":12},{"ruleId":"75","severity":1,"message":"76","line":38,"column":6,"nodeType":"77","endLine":38,"endColumn":8,"suggestions":"78"},{"ruleId":"67","severity":1,"message":"79","line":43,"column":15,"nodeType":"69","messageId":"70","endLine":43,"endColumn":22},{"ruleId":"67","severity":1,"message":"80","line":9,"column":14,"nodeType":"69","messageId":"70","endLine":9,"endColumn":20},{"ruleId":"67","severity":1,"message":"68","line":9,"column":30,"nodeType":"69","messageId":"70","endLine":9,"endColumn":38},{"ruleId":"67","severity":1,"message":"80","line":6,"column":14,"nodeType":"69","messageId":"70","endLine":6,"endColumn":20},{"ruleId":"81","replacedBy":"82"},{"ruleId":"83","replacedBy":"84"},{"ruleId":"67","severity":1,"message":"85","line":8,"column":30,"nodeType":"69","messageId":"70","endLine":8,"endColumn":37},"no-unused-vars","'dispatch' is assigned a value but never used.","Identifier","unusedVar","no-empty-pattern","Unexpected empty object pattern.","ObjectPattern","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["86"],"'payload' is assigned a value but never used.","'basket' is assigned a value but never used.","no-native-reassign",["87"],"no-negated-in-lhs",["88"],"'dispath' is assigned a value but never used.",{"desc":"89","fix":"90"},"no-global-assign","no-unsafe-negation","Update the dependencies array to be: [dispatch]",{"range":"91","text":"92"},[1183,1185],"[dispatch]"]